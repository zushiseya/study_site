<div class="container px-5 px-sm-0">
  <div class="row">
    <div class="col-md-3">
      <h2>User info</h2>
      <table class="table">
        <tbody>
          <tr>
            <td><%= image_tag @user.get_profile_image, size: "100x100" %></td>
            <th><%= @user.name %></th>
          </tr>
        </tbody>
      </table>
      <% unless @user.guest_user? %>
        <% if @user == current_user %>
          <div class="row">
            <%= link_to edit_user_path(@user), class: "btn btn-outline-secondary btn-block" do %>
              <i class="fas fa-user-cog"></i>
            <% end %>
          </div>
          <div class="row">
            <%= link_to favorited_posts_user_path(@user), class: "btn btn-outline-secondary btn-block" do %>
            „ÄÄ<i class="fa-solid fa-heart"></i>
            <% end %>
          </div>
        <% else %>
          <% relationship = current_user.relationship_with(@user) %>
          <% if current_user.following?(@user) %>
            <%= link_to "„Éï„Ç©„É≠„Éº‰∏≠", user_relationship_path(@user.id, relationship.id), method: :delete, data: { confirm: "Êú¨ÂΩì„Å´„Éï„Ç©„É≠„ÉºËß£Èô§„Åó„Åæ„Åô„ÅãÔºü"}, class: "btn btn-outline-secondary btn-black" %>
          <% else %>
            <%= link_to "„Éï„Ç©„É≠„Éº", user_relationships_path(@user.id), method: :post, class: "btn btn-dark text-light" %>
          <% end %>
        <% end %>
      <% end %>
      <div class="row">
            <%= link_to "<strong>#{@user.followings.count}</strong> „Éï„Ç©„É≠„Éº‰∏≠".html_safe, followings_user_path(@user), class: "btn btn-text-dark" %>
            <%= link_to "<strong>#{@user.followers.count}</strong> „Éï„Ç©„É≠„ÉØ„Éº".html_safe, followers_user_path(@user), class: "btn btn-text-dark" %>
      </div>
    </div>
  </div>
</div>

<div class="container px-5 px-sm-0">
  <h2>User Posts</h2>
  <table class="table table-hover table-bordered custom-table">
    <thead>
      <tr>
        <th>„Çø„Ç§„Éà„É´</th>
        <th>Ë™¨Êòé</th>
        <th></th>
        <th></th>
        <th>ÁîªÂÉè</th>
      </tr>
    </thead>
    <tbody>
      <% @posts.each do |post| %>
      <tr onclick= "window.location='<%= post_path(post.id) %>'" style="cursor: pointer;">
        <td>
          <%= post.title %>
        </td>
        <td>
          <%= truncate(post.text, length: 100, omission: '...') %>
        </td>
        <td style= "white-space: nowrap;">
          <%= "#{post.post_comments.count} üí¨" %>
        </td>
        <td style= "white-space: nowrap;">
           <%= post.favorites.count %>‚ô•
        </td>
        <td>
          <%= image_tag post.get_image, size: "100x100" %>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>